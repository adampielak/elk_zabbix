<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>4.4</version>
    <date>2020-05-20T07:56:26Z</date>
    <groups>
        <group>
            <name>Templates/Applications</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template App Elasticsearch</template>
            <name>Template App Elasticsearch</name>
            <groups>
                <group>
                    <name>Templates/Applications</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>elasticsearch_cluster_stats</name>
                </application>
                <application>
                    <name>elasticsearch_health_stats</name>
                </application>
                <application>
                    <name>elasticsearch_index_stats</name>
                </application>
                <application>
                    <name>elasticsearch_nodes_stats</name>
                </application>
                <application>
                    <name>get json data</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>elasticsearch_cluster.cluster.stats</name>
                    <type>HTTP_AGENT</type>
                    <key>elasticsearch_cluster.cluster.stats</key>
                    <history>0</history>
                    <trends>0</trends>
                    <applications>
                        <application>
                            <name>get json data</name>
                        </application>
                    </applications>
                    <url>{$URL}/_cluster/stats</url>
                </item>
                <item>
                    <name>elasticsearch_cluster.cluster._nodes.failed</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.cluster._nodes.failed</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_cluster_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$._nodes.failed</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.cluster.stats</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{last()}=0</recovery_expression>
                            <name>{HOST.NAME}  Elasticsearch Nodes failed number &gt; 0</name>
                            <priority>HIGH</priority>
                            <tags>
                                <tag>
                                    <tag>trigger</tag>
                                    <value>Node failed</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>elasticsearch_cluster.cluster._nodes.successful</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.cluster._nodes.successful</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_cluster_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$._nodes.successful</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.cluster.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.cluster._nodes.total</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.cluster._nodes.total</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_cluster_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$._nodes.total</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.cluster.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.active_primary_shards</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.active_primary_shards</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.active_primary_shards</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.active_shards</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.active_shards</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.active_shards</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.active_shards_percent_as_number</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.active_shards_percent_as_number</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <value_type>FLOAT</value_type>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.active_shards_percent_as_number</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{last()}&lt;100</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{last()}=100</recovery_expression>
                            <name>{HOST.NAME} Elasticsearch Active Shards % &lt; 100%</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.cluster_name</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.cluster_name</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.cluster_name</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.delayed_unassigned_shards</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.delayed_unassigned_shards</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.delayed_unassigned_shards</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.initializing_shards</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.initializing_shards</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.initializing_shards</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.number_of_data_nodes</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.number_of_data_nodes</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.number_of_data_nodes</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.number_of_in_flight_fetch</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.number_of_in_flight_fetch</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.number_of_in_flight_fetch</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.number_of_nodes</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.number_of_nodes</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.number_of_nodes</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.number_of_pending_tasks</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.number_of_pending_tasks</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.number_of_pending_tasks</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.relocating_shards</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.relocating_shards</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.relocating_shards</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.stats</name>
                    <type>HTTP_AGENT</type>
                    <key>elasticsearch_cluster.health.stats</key>
                    <history>0</history>
                    <trends>0</trends>
                    <applications>
                        <application>
                            <name>get json data</name>
                        </application>
                    </applications>
                    <url>{$URL}/_cluster/health?pretty=true</url>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.status</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.status</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.status</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{str(&quot;red&quot;)}=1</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{str(&quot;green&quot;)}=1</recovery_expression>
                            <name>{HOST.NAME} Elasticsearch cluster health status is RED</name>
                            <priority>HIGH</priority>
                        </trigger>
                        <trigger>
                            <expression>{str(&quot;yellow&quot;)}=1</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{str(&quot;green&quot;)}=1</recovery_expression>
                            <name>{HOST.NAME} Elasticsearch cluster health status is YELLOW</name>
                            <priority>AVERAGE</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.task_max_waiting_in_queue_millis</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.task_max_waiting_in_queue_millis</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.task_max_waiting_in_queue_millis</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.timed_out</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.timed_out</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.timed_out</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.health.unassigned_shards</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.health.unassigned_shards</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_health_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.unassigned_shards</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.health.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.index.stats</name>
                    <type>HTTP_AGENT</type>
                    <key>elasticsearch_cluster.index.stats</key>
                    <history>0</history>
                    <trends>0</trends>
                    <applications>
                        <application>
                            <name>get json data</name>
                        </application>
                    </applications>
                    <url>{$URL}/zabbix/_stats?pretty=true</url>
                </item>
                <item>
                    <name>elasticsearch_cluster.index.zabbix._shards.failed</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.index.zabbix._shards.failed</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_index_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$._shards.failed</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.index.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.index.zabbix._shards.successful</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.index.zabbix._shards.successful</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_index_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$._shards.successful</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.index.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.index.zabbix._shards.total</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.index.zabbix._shards.total</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_index_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$._shards.total</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.index.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.nodes.stats</name>
                    <type>HTTP_AGENT</type>
                    <key>elasticsearch_cluster.nodes.stats</key>
                    <history>0</history>
                    <trends>0</trends>
                    <applications>
                        <application>
                            <name>get json data</name>
                        </application>
                    </applications>
                    <url>{$URL}/_nodes/stats</url>
                </item>
                <item>
                    <name>elasticsearch_cluster.nodes.stats.cluster_name</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.nodes.stats.cluster_name</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>elasticsearch_nodes_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.cluster_name</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.nodes.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.nodes.stats.failed</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.nodes.stats.failed</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_nodes_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$._nodes.failed</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.nodes.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.nodes.stats.successful</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.nodes.stats.successful</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_nodes_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$._nodes.successful</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.nodes.stats</key>
                    </master_item>
                </item>
                <item>
                    <name>elasticsearch_cluster.nodes.stats.total</name>
                    <type>DEPENDENT</type>
                    <key>elasticsearch_cluster.nodes.stats.total</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>elasticsearch_nodes_stats</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$._nodes.total</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>elasticsearch_cluster.nodes.stats</key>
                    </master_item>
                </item>
            </items>
        </template>
    </templates>
</zabbix_export>
